import{__spreadArrays}from"tslib";var TimerManagement=function(){function t(t){this.disposed=!1,this.immediateIds=null,this.intervals=[],this.timeouts=[],this.parent=t||null}return t.prototype.clearAllTimers=function(){for(var t=0,e=this.intervals;t<e.length;t++){var i=e[t];window.clearInterval(i)}for(var n=0,r=this.timeouts;n<r.length;n++){var o=r[n];window.clearTimeout(o)}this.intervals.splice(0,this.intervals.length),this.timeouts.splice(0,this.timeouts.length)},t.prototype.clearImmediate=function(t){this.immediateIds&&this.immediateIds[t]&&(window.clearTimeout(t),delete this.immediateIds[t])},t.prototype.clearInterval=function(t){window.clearInterval(t),this.removeInterval(t)},t.prototype.clearTimeout=function(t){window.clearTimeout(t),this.removeTimeout(t)},t.prototype.setImmediate=function(t){var e=this,i=0;if(!this.disposed){this.immediateIds||(this.immediateIds={});var n=function(){try{e.immediateIds&&delete e.immediateIds[i],t.apply(e.parent)}catch(t){}};i=window.setTimeout(n,0),this.immediateIds[i]=!0}return i},t.prototype.setInterval=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=window.setInterval.apply(window,__spreadArrays([t,e],i));return this.intervals.push(r),r},t.prototype.setTimeout=function(t,e){for(var i=this,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=0;return o=window.setTimeout.apply(window,__spreadArrays([function(){i.removeTimeout(o),t.apply(void 0,n)},e],n)),this.timeouts.push(o),o},t.prototype.dispose=function(){if(this.disposed=!0,this.parent=null,this.clearAllTimers(),this.immediateIds)for(var t in this.immediateIds)this.immediateIds.hasOwnProperty(t)&&this.clearImmediate(parseInt(t,10));this.immediateIds=null},t.prototype.debounce=function(t,e,i){var n=this;if(this.disposed){var r=function(){};return r.cancel=function(){},r.flush=function(){return null},r.pending=function(){return!1},r}var o,a,s=e||0,l=!1,u=!0,m=null,d=0,p=(new Date).getTime(),c=null;i&&(l=i.leading||!1,u=i.trailing||!0,m=i.maxWait||null);var h=function(t){c&&(n.clearTimeout(c),c=null),p=t},f=function(e){h(e),o=t.apply(null,a)},v=function(t){var e=(new Date).getTime(),i=!1;t&&(l&&e-d>=s&&(i=!0),d=e);var r=e-d,a=s-r,h=e-p,w=!1;return null!==m&&(h>=m&&c?w=!0:a=Math.min(a,m-h)),r>=s||w||i?f(e):null!==c&&t||!u||(c=n.setTimeout(v,a)),o},w=function(){return!!c},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a=t,v(!0)};return y.cancel=function(){w()&&h((new Date).getTime())},y.flush=function(){return w()&&f((new Date).getTime()),o},y.pending=w,y},t.prototype.throttle=function(t,e,i){var n=this;if(this.disposed){var r=function(){};return r.cancel=function(){},r.flush=function(){return null},r.pending=function(){return!1},r}var o,a,s=e||0,l=!0,u=!0,m=0,d=null;i&&"boolean"==typeof i.leading&&(l=i.leading),i&&"boolean"==typeof i.trailing&&(u=i.trailing);var p=function(e){var i=(new Date).getTime(),r=i-m,c=l?s-r:s;return r>=s&&(!e||l)?(m=i,d&&(n.clearTimeout(d),d=null),o=t.apply(null,a)):null===d&&u&&(d=n.setTimeout(p,c)),o};return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a=t,p(!0)}},t.prototype.removeInterval=function(t){var e=this.intervals.indexOf(t);e>=0&&this.intervals.splice(e,1)},t.prototype.removeTimeout=function(t){var e=this.timeouts.indexOf(t);e>=0&&this.timeouts.splice(e,1)},t}();export{TimerManagement};
import{cellFromEvent}from"../../List";import{KeyCode}from"../../Util";import{SortOrder}from"./Table.Props";var ColumnSorting=function(){function e(e){var t=this;this.initialize=function(e,n,o){t.props=e,t.eventDispatch=o,o.addEventListener("click",t.onClick),o.addEventListener("keydown",t.onKeyDown)},this.componentDidMount=function(e){t.props=e},this.componentDidUpdate=function(e){t.props=e},this.componentWillUnmount=function(){t.eventDispatch&&(t.eventDispatch.removeEventListener("click",t.onClick),t.eventDispatch.removeEventListener("keydown",t.onKeyDown))},this.onClick=function(e){e.defaultPrevented||t.processSortEvent(e,!0)},this.onKeyDown=function(e){e.defaultPrevented||e.which!==KeyCode.enter&&e.which!==KeyCode.space||t.processSortEvent(e)},this.onSort=e}return e.prototype.processSortEvent=function(e,t){for(var n=cellFromEvent(e),o=e.target,r=!t&&o.classList.contains("bolt-table-header-cell-actionable");!r&&o!==n.cellElement&&o.parentElement;)r=(o=o.parentElement).classList.contains("bolt-table-header-cell-actionable");if(-1===n.rowIndex&&r){var i=this.props.columns[n.cellIndex];i&&i.sortProps&&(this.onSort(n.cellIndex,i.sortProps.sortOrder===SortOrder.ascending?SortOrder.descending:SortOrder.ascending,e),e.preventDefault())}},e}();export{ColumnSorting};export function sortItems(e,t,n,o,r){var i=n[e];i&&t===SortOrder.descending&&(i=function(t,o){return-n[e](t,o)});for(var s=0;s<o.length;s++){var c=o[s];c.sortProps&&(c.sortProps.sortOrder=s===e?t:void 0)}return i?r.sort(i):r};
import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Tabs.css";import*as React from"react";import{Orientation,TabSize}from"../../Components/Tabs/Tabs.Props";import{ObservableLike}from"../../Core/Observable";import{FocusZone,FocusZoneDirection}from"../../FocusZone";import{css}from"../../Util";import{Tab}from"./Tab";var Tabs=function(e){function o(o){var t=e.call(this,o)||this;return t.onTabClick=function(e){var o=t.props.onSelectedTabChanged;o&&o(e)},t.onSelectedTabIdChanged=function(){t.forceUpdate()},ObservableLike.isObservable(o.selectedTabId)&&o.selectedTabId.subscribe(t.onSelectedTabIdChanged),t}return __extends(o,e),o.prototype.componentWillUnmount=function(){ObservableLike.isObservable(this.props.selectedTabId)&&this.props.selectedTabId.unsubscribe(this.onSelectedTabIdChanged)},o.prototype.render=function(){var e,o=this,t=this.props,r=t.tabSize,i=void 0===r?TabSize.Tall:r,s=t.orientation,a=void 0===s?Orientation.Horizontal:s,n=this.props.selectedTabId&&ObservableLike.getValue(this.props.selectedTabId),c=0,p=0,l={};React.Children.map(this.props.children,function(o){o&&o.type===Tab&&(l[o.props.id]=p++,c++,!e&&o.props.id&&(e="tab-"+o.props.id))});var b=React.Children.map(this.props.children,function(e){if(e&&"string"!=typeof e.type){var t=(e.props.id&&e.props.id.toLocaleLowerCase())===(n&&n.toLocaleLowerCase()),r=o.onTabClick;return React.cloneElement(e,__assign(__assign({},e.props),{isSelected:t,onClick:r,index:l[e.props.id],setSize:c}))}return e}),d=a===Orientation.Vertical?"flex-column":"flex-row",m=a===Orientation.Vertical?FocusZoneDirection.Vertical:FocusZoneDirection.Horizontal;return React.createElement(FocusZone,{direction:m,focusGroupProps:{defaultElementId:e}},React.createElement("div",{"aria-label":this.props.ariaLabel,className:css(this.props.className,"bolt-tabs",d,i),role:"tablist"},b))},o}(React.Component);export{Tabs};
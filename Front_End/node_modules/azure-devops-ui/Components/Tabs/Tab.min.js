function overflowDetected(e){var t=e.querySelector(".bolt-tab-text");return!!t&&(t&&t.scrollWidth>Math.ceil(t.offsetWidth))}import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Tabs.css";import*as React from"react";import{FocusGroupContext}from"../../FocusGroup";import{FocusZoneContext}from"../../FocusZone";import{Icon}from"../../Icon";import{Observer}from"../../Observer";import{Tooltip}from"../../TooltipEx";import{css,getSafeId,KeyCode}from"../../Util";import{getFriendlyDisplayValue}from"../../Utilities/FriendlyNumber";import{TabBadge}from"./TabBadge";var Tab=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){var o=t.props.url,r=!0;e.ctrlKey&&o&&(r=!1),r&&(e.preventDefault(),t.updateSelectedItem(e))},t.onKeyDown=function(e){e.defaultPrevented||e.which!==KeyCode.space&&e.which!==KeyCode.enter||(e.preventDefault(),t.updateSelectedItem(e))},t}return __extends(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.ariaLabel,r=t.index,n=t.setSize,a=t.iconProps,i=t.id,s=t.isSelected,c=t.renderBadge,l=t.url,p=l?"a":"div";return React.createElement(Observer,{name:this.props.name,badgeCount:this.props.badgeCount},function(t){var d=t.name;return React.createElement(FocusGroupContext.Consumer,null,function(u){return React.createElement(FocusZoneContext.Consumer,null,function(m){var f=c?c():e.renderBadge(t.badgeCount),b=void 0!==a&&Icon(__assign({className:"bolt-tab-icon"},a)),v=d&&React.createElement("span",{className:"bolt-tab-text","data-content":d},d),h=b&&!d&&o?{text:o,overflowOnly:!1}:{text:d,overflowDetected:overflowDetected,overflowOnly:!0};return React.createElement(Tooltip,__assign({},h),React.createElement(p,{"aria-label":o,"aria-posinset":void 0!==r?r+1:void 0,"aria-selected":s,"aria-setsize":n,className:css(e.props.className,"bolt-tab focus-treatment flex-noshrink",s&&"selected"),"data-focuszone":m.focuszoneId,href:l,id:getSafeId("tab-"+i),key:i,onClick:e.onClick,onKeyDown:e.onKeyDown,role:"tab",tabIndex:u.focusedElementId==="tab-"+i?0:-1},React.createElement("span",{className:"bolt-tab-inner-container"},b,v,f)))})})})},t.prototype.renderBadge=function(e){var t=void 0!==e?getFriendlyDisplayValue(e):void 0,o=void 0;e&&t!==e.toString()&&(o=e.toString());var r=null;if(t){var n=o?{text:o}:void 0;r=React.createElement(TabBadge,{tooltipProps:n},t)}return r},t.prototype.updateSelectedItem=function(e){var t=this.props.onClick;e&&this.props.onBeforeTabChange&&!this.props.onBeforeTabChange(e,this.props.id,this.props.url)?e.preventDefault():t&&t(this.props.id)},t}(React.Component);export{Tab};
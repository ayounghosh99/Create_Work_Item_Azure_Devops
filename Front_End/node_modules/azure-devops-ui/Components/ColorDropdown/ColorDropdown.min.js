function ColorDropdownCallout(e){return React.createElement(ColorDropdownCalloutComponent,__assign({},e))}import{__assign,__awaiter,__extends,__generator}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./ColorDropdown.css";import*as React from"react";import{wait}from"../../Core/Util/Promise";import{format}from"../../Core/Util/String";import{Button}from"../../Button";import{Callout,ContentSize}from"../../Callout";import{Dropdown}from"../../Dropdown";import{FocusZone,FocusZoneDirection,FocusZoneKeyStroke}from"../../FocusZone";import{ListSelection}from"../../List";import*as Resources from"../../Resources.Color";import{SimpleTableCell,Table}from"../../Table";import{css,KeyCode}from"../../Util";import{ArrayItemProvider}from"../../Utilities/Provider";var ColorDropdown=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o._selection=new ListSelection,o}return __extends(o,e),o.prototype.render=function(){var e=this,o=this.props.color,r=this.addColorClass(o),t=colorItems.findIndex(function(e){return"#"+e.id===o});return this._selection.select(t>=0?t:0),React.createElement(Dropdown,{ariaLabel:this.props.ariaLabel,className:css(this.props.className,r,"color-dropdown"),dismissOnSelect:!0,items:colorItems,renderCallout:ColorDropdownCallout,renderSelectedItems:function(){return""},selection:this._selection,onSelect:function(o,r){e.props.onColorSelected("#"+r.id)}})},o.prototype.addColorClass=function(e){e=e.replace("#","");for(var o=this.getStyleSheet(),r="bg-"+e,t="."+r+" .bolt-dropdown-expandable-textfield-input",s=0;s<o.cssRules.length;s++)if(o.cssRules[s].type===CSSRule.STYLE_RULE){if(o.cssRules[s].selectorText===t)return r}return o.insertRule(t+" { background-color: #"+e+"; }"),r},o.prototype.getStyleSheet=function(){for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].title===ColorDropdownStyleSheetTitle)return document.styleSheets[e];var o=document.createElement("style");return o.title=ColorDropdownStyleSheetTitle,o.appendChild(document.createTextNode("")),document.head.appendChild(o),o.sheet},o}(React.Component);export{ColorDropdown};var ColorDropdownStyleSheetTitle="colorDropdownStyles",ColorDropdownCalloutComponent=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o._focusedColumn=0,o.renderCell=function(e,r,t,s,n){var c,i=s.cells[r],l=null===(c=o.props.selection)||void 0===c?void 0:c.value[0].beginIndex,a=i===colorItems[null!==l&&void 0!==l?l:0];return React.createElement(SimpleTableCell,{ariaRowIndex:n,columnIndex:r,key:r,tableColumn:t},React.createElement(Button,{id:e+"-"+r,className:css(a&&"bolt-dropdown-init-focus","color-button flex-grow"),style:{backgroundColor:"#"+i.id},tooltipProps:{text:i.text},onClick:function(e){var r,t=colorItems.findIndex(function(e){return e.id===i.id});t>=0&&(null===(r=o.props.selection)||void 0===r||r.select(t),o.props.onSelect&&o.props.onSelect(e,colorItems[t]))},onFocus:function(){return o._focusedColumn=r},onKeyDown:function(e){0===r&&e.which===KeyCode.leftArrow&&e.preventDefault()}}))},o.columns=[{id:"c1",renderCell:o.renderCell,width:-100/11},{id:"c2",renderCell:o.renderCell,width:-100/11},{id:"c3",renderCell:o.renderCell,width:-100/11},{id:"c4",renderCell:o.renderCell,width:-100/11},{id:"c5",renderCell:o.renderCell,width:-100/11},{id:"c6",renderCell:o.renderCell,width:-100/11},{id:"c7",renderCell:o.renderCell,width:-100/11},{id:"c8",renderCell:o.renderCell,width:-100/11},{id:"c9",renderCell:o.renderCell,width:-100/11},{id:"c10",renderCell:o.renderCell,width:-100/11},{id:"c11",renderCell:o.renderCell,width:-100/11}],o}return __extends(o,e),o.prototype.render=function(){var e=this,o=this.props,r=o.anchorElement,t=o.anchorOffset,s=o.anchorOrigin,n=o.anchorPoint,c=o.blurDismiss,i=void 0===c||c,l=o.calloutContentClassName,a=o.contentLocation,u=o.dropdownOrigin,d=o.excludeTabStop,C=o.id,m=o.lightDismiss,R=o.onFilterKeyDown,h=function(){e.props.onDismiss&&e.props.onDismiss()};return React.createElement(Callout,{anchorElement:r,anchorOffset:t,anchorOrigin:s,anchorPoint:n,blurDismiss:i,calloutOrigin:u,contentClassName:css(l,"bolt-dropdown flex-column custom-scrollbar v-scroll-auto h-scroll-hidden color-dropdown-callout"),contentLocation:a,contentShadow:!0,contentSize:ContentSize.Auto,escDismiss:!0,id:C,lightDismiss:m,focuszoneProps:{postprocessKeyStroke:function(e){return e.which!==KeyCode.tab||e.defaultPrevented?FocusZoneKeyStroke.IgnoreNone:(e.preventDefault(),h(),FocusZoneKeyStroke.IgnoreAll)}},onDismiss:h},React.createElement(FocusZone,{circularNavigation:!0,defaultActiveElement:".bolt-dropdown-init-focus",direction:FocusZoneDirection.Vertical,focusOnMount:!0},React.createElement("div",{className:"bolt-dropdown-container no-outline",onKeyDown:R},React.createElement("div",{"aria-hidden":"true",className:"no-outline",tabIndex:d?void 0:-1,role:"listbox"}),React.createElement(Table,{columns:this.columns,containerClassName:"color-dropdown-table-container",itemProvider:colorRowProvider,onFocus:function(o,r){return __awaiter(e,void 0,void 0,function(){var e,r,t;return __generator(this,function(s){switch(s.label){case 0:return e=o.nativeEvent,[4,wait(0)];case 1:return s.sent(),"TR"===e.target.tagName&&(r=e.target,(t=r.querySelector('td[data-column-index="'+this._focusedColumn+'"] button'))&&t!==document.activeElement&&t.focus()),[2]}})})}}))))},o}(React.Component),colorRows=[{cells:[{id:"222222",text:Resources.Black},{id:"292E6B",text:Resources.Blue},{id:"009CCC",text:Resources.Turquoise},{id:"00643A",text:Resources.Teal},{id:"339947",text:Resources.Green},{id:"FBBC3D",text:Resources.Yellow},{id:"DB552C",text:Resources.Orange},{id:"7F1725",text:Resources.Red},{id:"EC008C",text:Resources.Pink},{id:"5C197B",text:Resources.Purple},{id:"51399F",text:Resources.Indigo}]},{cells:[{id:"444444",text:format(Resources.TenPercentLighterColor,Resources.Black.toLowerCase())},{id:"1B478B",text:format(Resources.TenPercentLighterColor,Resources.Blue.toLowerCase())},{id:"43B4D5",text:format(Resources.TenPercentLighterColor,Resources.Turquoise.toLowerCase())},{id:"207752",text:format(Resources.TenPercentLighterColor,Resources.Teal.toLowerCase())},{id:"60AF49",text:format(Resources.TenPercentLighterColor,Resources.Green.toLowerCase())},{id:"FBD144",text:format(Resources.TenPercentLighterColor,Resources.Yellow.toLowerCase())},{id:"E87025",text:format(Resources.TenPercentLighterColor,Resources.Orange.toLowerCase())},{id:"B20B1E",text:format(Resources.TenPercentLighterColor,Resources.Red.toLowerCase())},{id:"EF33A3",text:format(Resources.TenPercentLighterColor,Resources.Pink.toLowerCase())},{id:"71338D",text:format(Resources.TenPercentLighterColor,Resources.Purple.toLowerCase())},{id:"6951AA",text:format(Resources.TenPercentLighterColor,Resources.Indigo.toLowerCase())}]},{cells:[{id:"666666",text:format(Resources.TwentyPercentLighterColor,Resources.Black.toLowerCase())},{id:"0D60AB",text:format(Resources.TwentyPercentLighterColor,Resources.Blue.toLowerCase())},{id:"86CDDE",text:format(Resources.TwentyPercentLighterColor,Resources.Turquoise.toLowerCase())},{id:"56987D",text:format(Resources.TwentyPercentLighterColor,Resources.Teal.toLowerCase())},{id:"8DC54B",text:format(Resources.TwentyPercentLighterColor,Resources.Green.toLowerCase())},{id:"FBE74B",text:format(Resources.TwentyPercentLighterColor,Resources.Yellow.toLowerCase())},{id:"F58B1F",text:format(Resources.TwentyPercentLighterColor,Resources.Orange.toLowerCase())},{id:"E60017",text:format(Resources.TwentyPercentLighterColor,Resources.Red.toLowerCase())},{id:"F266BA",text:format(Resources.TwentyPercentLighterColor,Resources.Pink.toLowerCase())},{id:"9260A1",text:format(Resources.TwentyPercentLighterColor,Resources.Purple.toLowerCase())},{id:"8874C2",text:format(Resources.TwentyPercentLighterColor,Resources.Indigo.toLowerCase())}]},{cells:[{id:"888888",text:format(Resources.FortyPercentLighterColor,Resources.Black.toLowerCase())},{id:"007ACC",text:format(Resources.FortyPercentLighterColor,Resources.Blue.toLowerCase())},{id:"C9E7E7",text:format(Resources.FortyPercentLighterColor,Resources.Turquoise.toLowerCase())},{id:"7CAF9A",text:format(Resources.FortyPercentLighterColor,Resources.Teal.toLowerCase())},{id:"A8CE4B",text:format(Resources.FortyPercentLighterColor,Resources.Green.toLowerCase())},{id:"FBFD52",text:format(Resources.FortyPercentLighterColor,Resources.Yellow.toLowerCase())},{id:"F7A24B",text:format(Resources.FortyPercentLighterColor,Resources.Orange.toLowerCase())},{id:"EB3345",text:format(Resources.FortyPercentLighterColor,Resources.Red.toLowerCase())},{id:"F599D1",text:format(Resources.FortyPercentLighterColor,Resources.Pink.toLowerCase())},{id:"AE88B9",text:format(Resources.FortyPercentLighterColor,Resources.Purple.toLowerCase())},{id:"AA9CDF",text:format(Resources.FortyPercentLighterColor,Resources.Indigo.toLowerCase())}]},{cells:[{id:"AAAAAA",text:format(Resources.SixtyPercentLighterColor,Resources.Black.toLowerCase())},{id:"3F9BD8",text:format(Resources.SixtyPercentLighterColor,Resources.Blue.toLowerCase())},{id:"D6EDED",text:format(Resources.SixtyPercentLighterColor,Resources.Turquoise.toLowerCase())},{id:"9CC3B2",text:format(Resources.SixtyPercentLighterColor,Resources.Teal.toLowerCase())},{id:"C3D84C",text:format(Resources.SixtyPercentLighterColor,Resources.Green.toLowerCase())},{id:"FCFD7D",text:format(Resources.SixtyPercentLighterColor,Resources.Yellow.toLowerCase())},{id:"F9B978",text:format(Resources.SixtyPercentLighterColor,Resources.Orange.toLowerCase())},{id:"F06673",text:format(Resources.SixtyPercentLighterColor,Resources.Red.toLowerCase())},{id:"F9CCE8",text:format(Resources.SixtyPercentLighterColor,Resources.Pink.toLowerCase())},{id:"C7ABD0",text:format(Resources.SixtyPercentLighterColor,Resources.Purple.toLowerCase())},{id:"C0B6E9",text:format(Resources.SixtyPercentLighterColor,Resources.Indigo.toLowerCase())}]},{cells:[{id:"CCCCCC",text:format(Resources.EightyPercentLighterColor,Resources.Black.toLowerCase())},{id:"7FBCE5",text:format(Resources.EightyPercentLighterColor,Resources.Blue.toLowerCase())},{id:"E4F3F3",text:format(Resources.EightyPercentLighterColor,Resources.Turquoise.toLowerCase())},{id:"BFD8CD",text:format(Resources.EightyPercentLighterColor,Resources.Teal.toLowerCase())},{id:"D7E587",text:format(Resources.EightyPercentLighterColor,Resources.Green.toLowerCase())},{id:"FCFEA8",text:format(Resources.EightyPercentLighterColor,Resources.Yellow.toLowerCase())},{id:"FBD0A5",text:format(Resources.EightyPercentLighterColor,Resources.Orange.toLowerCase())},{id:"F599A2",text:format(Resources.EightyPercentLighterColor,Resources.Red.toLowerCase())},{id:"FBDDEF",text:format(Resources.EightyPercentLighterColor,Resources.Pink.toLowerCase())},{id:"E0CAE7",text:format(Resources.EightyPercentLighterColor,Resources.Purple.toLowerCase())},{id:"DAD4F7",text:format(Resources.EightyPercentLighterColor,Resources.Indigo.toLowerCase())}]}],colorRowProvider=new ArrayItemProvider(colorRows),colorItems=colorRows.reduce(function(e,o){return e.concat(o.cells)},[]);
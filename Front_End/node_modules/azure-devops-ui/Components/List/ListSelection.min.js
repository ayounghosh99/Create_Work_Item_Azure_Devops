import{__extends,__spreadArrays}from"tslib";import{Selection}from"../../Utilities/Selection";var ListSelection=function(e){function t(t){var l=e.call(this,"boolean"==typeof t||void 0===t?t:{alwaysMerge:t.alwaysMerge,multiSelect:t.multiSelect,unselectableRanges:t.unselectableRanges,selectedRanges:t.selectedRanges})||this;return l.selectOnFocus=!0,"boolean"!=typeof t&&void 0!==t&&(l.selectOnFocus=void 0===t.selectOnFocus||t.selectOnFocus),l}return __extends(t,e),t}(Selection);export{ListSelection};var FilteredListSelection=function(e){function t(t){var l=e.call(this,{alwaysMerge:t.alwaysMerge,multiSelect:t.multiSelect,unselectableRanges:t.unselectableRanges,selectedRanges:t.value,selectOnFocus:t.selectOnFocus})||this;return l.filteredIndexMap=[],l.updateFilteredSelection=function(e,t){if(void 0===t&&(t=l.selection.multiSelect),0===e.length)l.value=__spreadArrays(l.selection.value),l.unselectableRanges=__spreadArrays(l.selection.unselectableRanges);else{var n=new Selection(t);e.map(function(e,s){l.selection.selected(e)&&n.select(s,1,!0,t),l.selection.selectable(e)||n.addUnselectable(s)}),l.value=__spreadArrays(n.value),l.unselectableRanges=__spreadArrays(n.unselectableRanges)}l.filteredIndexMap=e},l.selectionChanged=function(e,t){switch(t){case"addUnselectable":for(s=0;s<e.length;s++)for(n=e[s].beginIndex;n<=e[s].endIndex;n++){a=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(n):n;l.selectable(a)&&l.addUnselectable(a,1)}break;case"removeUnselectable":for(s=0;s<e.length;s++)for(var n=e[s].beginIndex;n<=e[s].endIndex;n++){a=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(n):n;l.selectable(a)||l.removeUnselectable(a,1)}break;case"setUnselectable":case"set":l.updateFilteredSelection(l.filteredIndexMap);break;case"select":for(s=0;s<e.length;s++)for(i=e[s].beginIndex;i<=e[s].endIndex;i++){(a=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(i):i)>-1&&!l.selected(a)&&l.select(a,1,!0)}break;case"unselect":for(var s=0;s<e.length;s++)for(var i=e[s].beginIndex;i<=e[s].endIndex;i++){var a=l.filteredIndexMap.length>0?l.filteredIndexMap.indexOf(i):i;l.selected(a)&&l.unselect(a,1)}}},l.selection=t,l}return __extends(t,e),t.prototype.select=function(t,l,n,s){if(e.prototype.select.call(this,t,l,n,s),this.filteredIndexMap.length>0){n||this.clear(),l=l||1;for(var i=0;i<l;i++)this.selection.select(this.filteredIndexMap[t+i],1,!0,s)}else this.selection.select(t,l,n,s)},t.prototype.unselect=function(t,l){if(e.prototype.unselect.call(this,t,l),this.filteredIndexMap.length>0){l=l||1;for(var n=0;n<l;n++)this.selection.unselect(this.filteredIndexMap[t+n],1)}else this.selection.unselect(t,l)},t.prototype.clear=function(){if(e.prototype.clear.call(this),this.filteredIndexMap.length>0)for(var t=0;t<this.filteredIndexMap.length;t++)this.selection.unselect(this.filteredIndexMap[t]);else this.selection.clear()},t}(ListSelection);export{FilteredListSelection};
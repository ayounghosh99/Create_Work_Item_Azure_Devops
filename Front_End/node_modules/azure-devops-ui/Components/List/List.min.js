function getAttributeAsNumber(e,t){var r=e.getAttribute(t);return r?parseInt(r,10):-1}import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./List.css";import"./ListDropIndicator.css";import*as React from"react";import{ObservableArray,ObservableLike}from"../../Core/Observable";import{FocusWithin}from"../../FocusWithin";import{FocusZone,FocusZoneContext,FocusZoneDirection}from"../../FocusZone";import{Icon}from"../../Icon";import{Intersection,IntersectionContext}from"../../Intersection";import{getDefaultLinkProps,Link}from"../../Link";import{Observer}from"../../Observer";import{Tooltip}from"../../TooltipEx";import{css,eventTargetContainsNode,getSafeId,KeyCode}from"../../Util";import{EventDispatch}from"../../Utilities/Dispatch";import{getTabIndex}from"../../Utilities/Focus";var List=function(e){function t(t){var r=e.call(this,t)||this;r.bodyElement=React.createRef(),r.listElement=React.createRef(),r.spacerElements={},r.scrollToIndex=-1,r.scrollToOptions=void 0,r.selectOnFocus=!0,r.focusIndex=-1,r.pivotIndex=-1,r.onBlur=function(){r.focusIndex=-1},r.onClick=function(e){if(r.onDispatch(e),!(e.defaultPrevented||e.altKey&&r.props.selectableText)&&r.listElement.current){var t=cellFromEvent(e),o=t.cellElement,i=t.rowIndex;if(!o||!eventTargetContainsNode(e,["A"],o)){var n=ObservableLike.getValue(r.state.rows[i]);if(i>=0&&n){var s={data:n,index:i};r.props.selectRowOnClick&&r.processSelectionEvent(e,s),r.props.singleClickActivation&&r.rowActivated(e,s)}}}},r.onDispatch=function(e){r.state.eventDispatch.dispatchEvent(e)},r.onDoubleClick=function(e){if(r.onDispatch(e),!e.defaultPrevented&&!r.props.singleClickActivation){var t=cellFromEvent(e).rowIndex,o=ObservableLike.getValue(r.state.rows[t]);t>=0&&o&&r.rowActivated(e,{data:o,index:t})}},r.onFocusBody=function(e){if(r.selectOnFocus){var t=r.props.selection;if(!t||t.selectOnFocus){var o=r.focusIndex;if(o>=0){var i=ObservableLike.getValue(r.state.rows[o]);i&&r.processSelectionEvent(e,{data:i,index:o})}}r.selectOnFocus=!1}},r.onFocusItem=function(e,t){var o=r.focusIndex;if(o!==e){o>=0?delete r.state.renderedRows[o]:delete r.state.renderedRows[r.getInitialTabbableRow()],delete r.state.renderedRows[e],r.focusIndex=e;var i=ObservableLike.getValue(r.state.rows[e]);i&&r.rowFocused(t,{data:i,index:e})}},r.onKeyDown=function(e){if(r.onDispatch(e),!e.defaultPrevented){var t=e.target.nodeName;if("INPUT"===t||"TEXTAREA"===t)return;var o=r.focusIndex,i=ObservableLike.getValue(r.state.rows[o]);if(i)if(e.which===KeyCode.enter)o>=0&&!eventTargetContainsNode(e,["A"])&&r.rowActivated(e,{data:i,index:o});else if(e.which===KeyCode.space)r.processSelectionEvent(e,{data:i,index:o}),e.preventDefault();else if(e.which===KeyCode.upArrow||e.which===KeyCode.downArrow){var n=r.props.selection;n&&(!n.selectOnFocus||!e.shiftKey&&e.ctrlKey)||(e.persist(),window.setTimeout(function(){if(r.focusIndex!=o){var t=ObservableLike.getValue(r.state.rows[r.focusIndex]);t&&r.processSelectionEvent(e,{data:t,index:r.focusIndex})}},0))}else if(e.which===KeyCode.pageDown){s=r.getStats();r.focusRow(Math.min(o+(s.lastRendered-s.firstRendered),r.state.rowCount-1),1),e.preventDefault()}else if(e.which===KeyCode.pageUp){var s=r.getStats();r.focusRow(Math.max(o-(s.lastRendered-s.firstRendered),0),-1),e.preventDefault()}else e.which===KeyCode.home?(r.focusRow(0,1),e.preventDefault()):e.which===KeyCode.end&&(r.focusRow(r.state.rowCount-1,-1),e.preventDefault())}},r.onIntersect=function(e){if(r.props.virtualize){var t=r.context.root.scrollTop,o=r.state,i=o.firstRendered,n=o.firstMaterialized,s=o.lastRendered,a=o.lastMaterialized,l=o.rowCount,c=o.rowProportion,d=r.state.rowHeight;if((t===r.state.scrollTop||!e.length)&&r.listElement.current&&r.bodyElement.current){var u=r.bodyElement.current.children;if(0===d){if(u.length>0){for(var p=0,h=0,m=0;m<u.length;m++){var f=r.bodyElement.current.children[m].getBoundingClientRect().height;f>0&&(p+=f,h++)}h>0&&(d=p/h)}if(0===d)return;if(-1!==r.scrollToIndex)return void r.setState({firstMaterialized:Math.max(0,r.scrollToIndex-r.state.pageSize),lastMaterialized:r.scrollToIndex+Math.min(r.props.initialPageCount*r.state.pageSize,l-1),rowHeight:d})}for(var v,g,w=r.context.root.getBoundingClientRect(),x=n,b=a,y=b,R=x,m=0;m<u.length;m++){var I=u[m],M=getAttributeAsNumber(I,"data-row-index"),C=I.getBoundingClientRect();M>=n&&M<=a&&(C.bottom<w.top-r.state.pageSize*d?x++:C.top>w.bottom+r.state.pageSize*d&&b--,M===n&&(v=I),M===a&&(g=I)),M>-1&&C.top<w.bottom&&C.bottom>w.top&&(R=Math.max(R,M),y=Math.min(y,M))}if(c<1)if(x>b||y===x||R===b)if(R>=l-1)x=Math.ceil(b-(w.height/d+r.state.pageSize));else{E=t-(r.listElement.current.offsetTop-r.context.root.offsetTop);x=Math.max(0,Math.min(l-1,Math.floor(E/(c*d)))-r.state.pageSize),b=Math.min(l-1,x+Math.ceil(w.height/d+r.state.pageSize)),R=-1,y=-1}else x=Math.min(x,y-r.state.pageSize),b=Math.max(b,R+r.state.pageSize);else if(x>b){var E=t-(r.listElement.current.offsetTop-r.context.root.offsetTop);x=Math.max(0,Math.min(l-1,Math.floor(E/d))-r.state.pageSize),b=Math.min(l-1,x+Math.ceil(w.height/d+r.state.pageSize)),R=-1,y=-1}else{if(x===n&&v){(z=(C=v.getBoundingClientRect()).top-w.top)>0&&(x-=Math.ceil(z/d))}if(b===a&&g){var C=g.getBoundingClientRect(),z=w.bottom-C.bottom;z>0&&(b+=Math.ceil(z/d))}}x=Math.max(x,0),b=Math.min(b,l-1),x===n&&y===i&&b===a&&R===s&&d===r.state.rowHeight&&t===r.state.scrollTop||r.setState({firstMaterialized:x,firstRendered:y,lastMaterialized:b,lastRendered:R,rowHeight:d,scrollTop:t})}}},r.onMouseDownBody=function(e){r.selectOnFocus=!1},r.getInitialTabbableRow=function(){var e=r.props,t=e.defaultTabbableRow,o=e.itemProvider,i=e.selection;if(t)return t;if(i)for(var n=0;n<o.length;n++)if(i.selectable(n))return n;return 0},r.getHeight=function(e){for(var t=0,o=r.props.rowHeights||[],i=0;i<e-1&&i<o.length;i++)t+=o[i];return t};var o=t.itemProvider.length,i=t.pageSize;if(r.state={columnCount:1,eventDispatch:t.eventDispatch||new EventDispatch,firstMaterialized:0,firstRendered:0,itemProvider:t.itemProvider,lastMaterialized:r.props.virtualize?Math.min(t.initialPageCount*i,o-1):o-1,lastRendered:r.props.virtualize?Math.min(t.initialPageCount*i,o-1):o-1,overlays:new ObservableArray,pageSize:i,renderedRows:{},rowCount:o,rowHeight:t.rowHeight||0,rowProportion:t.rowHeight&&t.maxHeight?Math.min(1,t.maxHeight/(t.rowHeight*o)):1,rows:{},scrollTop:0},t.behaviors)for(var n=0,s=t.behaviors;n<s.length;n++){var a=s[n];a.initialize&&a.initialize(t,r,r.state.eventDispatch)}return r}return __extends(t,e),t.getDerivedStateFromProps=function(e,t){var r=e.itemProvider.length,o=t.firstMaterialized,i=t.lastMaterialized;r!==t.rowCount&&(o=Math.max(0,Math.min(t.firstMaterialized,r)),i=e.virtualize?Math.max(o,Math.min(t.lastMaterialized+(t.lastMaterialized===t.rowCount-1?e.pageSize:0),r-1)):r-1);var n={firstMaterialized:o,itemProvider:e.itemProvider,lastMaterialized:i,pageSize:e.pageSize,rowCount:r,rowProportion:Math.min(1,(e.maxHeight||1e5)/(t.rowHeight*(r-(i-o))))};return e.itemProvider===t.itemProvider&&e.columnCount===t.columnCount||(n.columnCount=e.columnCount,n.renderedRows={},n.rows={}),n},t.prototype.render=function(){var e=this,t=this.props,r=t.ariaRowOffset,o=t.className,i=t.focuszoneProps,n=t.id,s=t.maxWidth,a=t.minWidth,l=t.width,c=this.state,d=c.firstMaterialized,u=c.lastMaterialized,p=c.rowCount,h=c.rowProportion,m=this.focusIndex,f=this.props.role?this.props.role:this.props.selection?"listbox":"list",v="table"===f||"grid"===f||"treegrid"===f,g=[],w=0,x=d,b=Math.max(0,p-u-1),y=0,R=Number.MAX_SAFE_INTEGER,I=0;if(-1!==m&&(R=Math.max(0,m-3),I=Math.min(p,m+3),R<d?(w=R,x=d-(I=Math.min(I,d-1))-1):I>u&&(b=(R=Math.max(R,u+1))-u-1,y=Math.max(0,p-I-1))),h<1&&(x+=Math.min(this.state.pageSize,d)),g.push(this.renderSpacer("st1",w)),R<d)for(M=R;M<=I;M++)g.push(this.renderRow(M));g.push(this.renderSpacer("st2",x));for(M=d;M<=u;M++)g.push(this.renderRow(M));if(g.push(this.renderSpacer("sb2",b,!0)),I>u)for(var M=R;M<=I;M++)g.push(this.renderRow(M));return g.push(this.renderSpacer("sb1",y,!0)),React.createElement(Observer,{itemProvider:{filter:function(t,r){e.props.selection&&e.props.selection.onItemsChanged(t,r);var o={renderedRows:{},rows:{}};if(t.removedItems&&e.focusIndex>=t.index&&t.index+t.removedItems.length>=e.focusIndex&&(e.focusIndex=-1),-1!==e.state.rowCount){var i=(t.addedItems?t.addedItems.length:0)-(t.removedItems?t.removedItems.length:0);i&&(o.rowCount=e.state.rowCount+i,o.firstMaterialized=Math.max(0,Math.min(e.state.firstMaterialized,o.rowCount-1)),o.lastMaterialized=e.props.virtualize?Math.max(o.firstMaterialized,Math.min(e.state.lastMaterialized+(t.index>=e.state.firstMaterialized&&t.index<=e.state.lastMaterialized+1?Math.min(e.state.pageSize,i):0),o.rowCount-1)):o.rowCount-1)}return e.setState(o),!1},observableValue:this.props.itemProvider}},React.createElement(FocusWithin,{onBlur:this.onBlur},function(t){var c=React.createElement("table",{"aria-colcount":v?e.props.ariaColumnCount?e.props.ariaColumnCount:e.props.columnCount:void 0,"aria-label":e.props.ariaLabel,"aria-rowcount":v?e.state.itemProvider.length+r:void 0,className:css(o,"bolt-list body-m relative scroll-hidden"),id:getSafeId(n),onBlur:t.onBlur,onClick:e.onClick,onContextMenu:e.onDispatch,onDoubleClick:e.onDoubleClick,onDragEnd:e.onDispatch,onDragEnter:e.onDispatch,onDragExit:e.onDispatch,onDragOver:e.onDispatch,onDragStart:e.onDispatch,onDrop:e.onDispatch,onFocus:t.onFocus,onKeyDown:e.onKeyDown,onKeyUp:e.onDispatch,onMouseDown:e.onDispatch,onTouchStart:e.onDispatch,ref:e.listElement,role:f,style:{maxWidth:s,minWidth:a,width:l}},e.props.renderHeader&&e.props.renderHeader(),React.createElement("tbody",{className:"relative",onFocus:e.onFocusBody,onMouseDown:e.onMouseDownBody,ref:e.bodyElement,role:"listbox"===f||"list"===f||"menu"===f?"presentation":void 0},e.renderOverlay(e.listElement),g));return i&&(c=React.createElement(FocusZone,__assign({},i,{skipHiddenCheck:!0}),c)),c}))},t.prototype.componentDidMount=function(){this.context.register(this.onIntersect)},t.prototype.componentDidUpdate=function(){var e=this.scrollToIndex,t=this.onScrollComplete;if(-1!==e&&this.state.rowHeight){var r=this.bodyElement.current,o=this.state,i=o.firstMaterialized,n=o.lastMaterialized;if(e>=i&&e<=n&&r)for(var s=0;s<r.children.length;s++){var a=r.children[s];if(cellFromElement(a).rowIndex===e){a.scrollIntoView(this.scrollToOptions);break}}this.onScrollComplete=void 0,this.scrollToIndex=-1,this.scrollToOptions=void 0,t&&t(e)}},t.prototype.componentWillUnmount=function(){this.context.unregister(this.onIntersect)},t.prototype.addOverlay=function(e,t,r,o){void 0===o&&(o=0);var i=this.state.overlays,n=i.value.findIndex(function(t){return t.id===e}),s={render:r,id:e,rowIndex:t,zIndex:o+1};n>=0?i.change(n,s):i.push(s)},t.prototype.removeOverlay=function(e){var t=this.state.overlays,r=t.value.findIndex(function(t){return t.id===e});r>=0&&t.splice(r,1)},t.prototype.getFocusIndex=function(){return this.focusIndex},t.prototype.getStats=function(){return{firstMaterialized:this.state.firstMaterialized,firstRendered:this.state.firstRendered,lastMaterialized:this.state.lastMaterialized,lastRendered:this.state.lastRendered}},t.prototype.scrollIntoView=function(e,t,r){var o=this.state,i=o.firstMaterialized,n=o.lastMaterialized,s=o.pageSize,a=o.rowCount,l=o.rowHeight,c=o.rowProportion;if(e>=0&&e<this.state.rowCount){var d=this.bodyElement.current;if(e>=i&&e<=n&&d){for(var u=0;u<d.children.length;u++){var p=d.children[u];if(cellFromElement(p).rowIndex===e){p.scrollIntoView(t);break}}r&&r(e)}else{this.onScrollComplete&&this.onScrollComplete(-1),this.onScrollComplete=r,this.scrollToIndex=e,this.scrollToOptions=t;var h=c<1?s:0;l&&this.setState({firstMaterialized:Math.max(0,e-h),lastMaterialized:Math.min(a-1,e+h)})}}},t.prototype.focusRow=function(e,t){var r=this;return void 0===t&&(t=1),new Promise(function(o){r.scrollIntoView(e,{block:"center"},function(i){if(i===e&&r.bodyElement.current){var n=r.bodyElement.current.querySelector("[data-row-index='"+i+"']");if(n)if(n.getAttribute("tabindex"))n.focus();else{var s=Math.min(r.state.rowCount-1,Math.max(0,i+t));s!==i?r.focusRow(s,t):s!==r.focusIndex&&r.focusRow(s,-t)}}o()})})},t.prototype.processSelectionEvent=function(e,t){var r=this.props,o=r.selection,i=r.enforceSingleSelect;if(!o||o.selectable(t.index)){if(o){var n=t.index,s=!i&&o.multiSelect;if(this.pivotIndex>=0&&e.shiftKey&&s)o.select(Math.min(this.pivotIndex,n),Math.abs(this.pivotIndex-n)+1,e.ctrlKey||e.metaKey,s);else{var a=e.which===KeyCode.space;(e.ctrlKey||e.metaKey||o.alwaysMerge||a)&&s?o.toggle(n,!0,s):o.select(n,1,!1,s)}e.shiftKey||(this.pivotIndex=n)}this.rowSelected(e,t)}},t.prototype.renderLoadingRow=function(e,t){return React.createElement(ListItem,{className:"bolt-list-row-loading",details:t,index:e},React.createElement("div",{className:"shimmer shimmer-line",style:{width:80*Math.random()+20+"%"}},"Â "))},t.prototype.renderOverlay=function(e){var t=this,r=this.state,o=r.firstMaterialized,i=r.lastMaterialized,n=r.overlays;return React.createElement(Observer,{overlays:n},function(r){var n=t.bodyElement.current;return r.overlays.length>0&&n?React.createElement("div",{className:"bolt-list-overlay-container absolute"},r.overlays.map(function(t){if(t.rowIndex<o||t.rowIndex>i)return null;var r=e.current&&e.current.querySelector("[data-row-index='"+t.rowIndex+"']");return r?React.createElement("div",{className:"bolt-list-overlay flex-row absolute",id:getSafeId(t.id),key:t.id,style:{height:r.offsetHeight,top:r.getBoundingClientRect().top-n.getBoundingClientRect().top,zIndex:10*t.zIndex}},t.render({rowElement:r})):null})):null})},t.prototype.renderRow=function(e){var t=this,r=this.props.itemProvider,o=this.state,i=o.renderedRows,n=o.rows,s=i[e];if(!s){var a=n[e];if(a||(a=r.getItem?r.getItem(e):r.value[e]),!a)return null;n[e]=a;var l=this.props.selection,c=void 0;l&&(c={observableValue:l,filter:function(t){for(var r=0,o=t;r<o.length;r++){var i=o[r];if(e>=i.beginIndex&&e<=i.endIndex)return!0}return!1}}),s=React.createElement(Observer,{item:a,key:e,selection:c},function(r){var o=t.props,i=o.selectableText,n=o.renderRow,s=o.renderLoadingRow,l=t.focusIndex,c=l>=0?l:t.getInitialTabbableRow(),d=ObservableLike.getValue(a),u={selectableText:i,ariaBusy:!r.item,ariaRowOffset:t.props.ariaRowOffset+1,data:d,eventDispatch:t.state.eventDispatch,excludeTabStop:c!==e,listProps:t.props,onFocusItem:t.onFocusItem,singleClickActivation:t.props.onActivate&&t.props.singleClickActivation};return r.item?n(e,r.item,u):s?s(e,u):t.renderLoadingRow(e,u)}),this.state.renderedRows[e]=s}return s},t.prototype.renderSpacer=function(e,t,r){var o=this,i=!r&&this.props.rowHeights?this.getHeight(t):t*this.state.rowHeight*this.state.rowProportion;return React.createElement("tr",{"aria-hidden":"true",className:"bolt-list-row-spacer invisible",key:e,ref:function(t){var r=o.spacerElements[e];t?r!==t&&(r&&o.context.unobserve(t),o.context.observe(t),o.spacerElements[e]=t):r&&(o.context.unobserve(r),delete o.spacerElements[e])},role:"presentation"},React.createElement("td",{className:"bolt-list-cell-spacer invisible",colSpan:this.props.columnCount,style:{height:i+"px"}}))},t.prototype.rowActivated=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"activate"),this.props.onActivate&&this.props.onActivate(e,t)},t.prototype.rowSelected=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"select"),this.props.onSelect&&this.props.onSelect(e,t)},t.prototype.rowFocused=function(e,t){this.state.eventDispatch.dispatchEvent(e,t,"focus"),this.props.onFocus&&this.props.onFocus(e,t)},t.contextType=IntersectionContext,t.defaultProps={ariaRowOffset:0,columnCount:1,focuszoneProps:{direction:FocusZoneDirection.Vertical},initialPageCount:3,maxHeight:1e5,pageSize:10,singleClickActivation:!1,selectRowOnClick:!0,virtualize:!0},t}(React.Component);export{List};var ScrollableList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=React.createRef(),t.scrollableElement=React.createRef(),t}return __extends(t,e),t.prototype.render=function(){return React.createElement(Intersection,{rootMargin:window.innerHeight/2},React.createElement("div",{ref:this.scrollableElement,onScroll:this.props.onScroll,className:css(this.props.outerClassName,"flex-grow","scroll-auto")},React.createElement(List,__assign({},this.props,{ref:this.list}))))},t.prototype.addOverlay=function(e,t,r,o){if(void 0===o&&(o=0),this.list.current)return this.list.current.addOverlay(e,t,r,o)},t.prototype.getStats=function(){return this.list.current?this.list.current.getStats():{firstMaterialized:-1,firstRendered:-1,lastMaterialized:-1,lastRendered:-1}},t.prototype.removeOverlay=function(e){if(this.list.current)return this.list.current.removeOverlay(e)},t.prototype.focusRow=function(e,t){return void 0===t&&(t=1),this.list.current?this.list.current.focusRow(e,t):Promise.resolve()},t.prototype.getFocusIndex=function(){return this.list.current?this.list.current.getFocusIndex():-1},t.prototype.scrollIntoView=function(e,t){if(this.list.current)return this.list.current.scrollIntoView(e,t)},t.prototype.scrollTo=function(e){this.scrollableElement.current&&(this.scrollableElement.current.scrollTop=e)},t}(React.Component);export{ScrollableList};var SimpleList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=React.createRef(),t.renderListItem=function(e,t,r){return renderListItem(e,r,renderListCell(t))},t}return __extends(t,e),t.prototype.render=function(){var e={selectableText:this.props.selectableText,className:this.props.className,columnCount:1,eventDispatch:this.props.eventDispatch,focuszoneProps:this.props.focuszoneProps,id:this.props.id,initialPageCount:this.props.initialPageCount,itemProvider:this.props.itemProvider,maxHeight:this.props.maxHeight,onActivate:this.props.onActivate,onFocus:this.props.onFocus,onSelect:this.props.onSelect,pageSize:this.props.pageSize,renderRow:this.renderListItem,selection:this.props.selection,width:this.props.width,virtualize:this.props.virtualize};return this.props.scrollable?React.createElement(ScrollableList,__assign({},e,{ref:this.list})):React.createElement(List,__assign({},e,{ref:this.list}))},t.prototype.addOverlay=function(e,t,r,o){if(void 0===o&&(o=0),this.list.current)return this.list.current.addOverlay(e,t,r,o)},t.prototype.removeOverlay=function(e){if(this.list.current)return this.list.current.removeOverlay(e)},t.prototype.focusRow=function(e,t){return void 0===t&&(t=1),this.list.current?this.list.current.focusRow(e,t):Promise.resolve()},t.prototype.getFocusIndex=function(){return this.list.current?this.list.current.getFocusIndex():-1},t.prototype.getStats=function(){return this.list.current?this.list.current.getStats():{firstMaterialized:-1,firstRendered:-1,lastMaterialized:-1,lastRendered:-1}},t.prototype.scrollIntoView=function(e,t){if(this.list.current)return this.list.current.scrollIntoView(e,t)},t}(React.Component);export{SimpleList};export function renderListItem(e,t,r){return React.createElement(ListItem,{details:t,index:e},r)};export function ListItem(e){var t=e.children,r=e.details,o=e.index,i=e.linkProps,n=r.selectableText,s=r.ariaBusy,a=r.ariaDescribedBy,l=r.ariaLabel,c=r.ariaPosInSet,d=r.ariaSetSize,u=r.excludeFocusZone,p=r.listProps,h=p.selection,m=p.singleClickActivation;return React.createElement(FocusWithin,{onFocus:function(t){e.details.onFocusItem(e.index,t)}},function(p){return React.createElement(FocusZoneContext.Consumer,null,function(f){var v={"aria-busy":s,"aria-describedby":a,"aria-label":l,"aria-posinset":void 0===c?o+1:null===c?void 0:c,"aria-selected":h&&h.selected(o),"aria-setsize":void 0===d?e.details.listProps.itemProvider.length:null===d?void 0:d,className:css(e.className,"bolt-list-row",0===o&&"first-row",i&&"bolt-link",h&&h.selected(o)&&"selected",p.hasFocus&&"focused",m&&"single-click-activation",n&&"selectable-text"),"data-focuszone":u||h&&!h.selectable(o)?void 0:f.focuszoneId,"data-row-index":o,tabIndex:getTabIndex(r),onBlur:p.onBlur,onFocus:p.onFocus,role:h?"option":"listitem"};return React.createElement(FocusZone,{direction:FocusZoneDirection.Horizontal},i?React.createElement("a",__assign({},getDefaultLinkProps(i),v),React.createElement("div",{className:"bolt-list-cell","data-column-index":0},React.createElement("div",{className:"bolt-list-cell-content flex-row"},t))):React.createElement("tr",__assign({},v),React.createElement("td",{className:"bolt-list-cell","data-column-index":0},React.createElement("div",{className:"bolt-list-cell-content flex-row"},t))))})})};export function renderListCell(e,t){void 0===t&&(t=!0);var r=void 0,o=React.createElement("span",{className:"text-ellipsis body-m"},"string"==typeof e||"number"==typeof e?e:e.textNode?e.textNode:e.text);t&&(o=React.createElement(Tooltip,{overflowOnly:!0},o));var i=o,n=css("bolt-list-cell-child flex-row flex-center");return"string"!=typeof e&&"number"!=typeof e&&(r=e.textClassName,e.iconProps&&(i=React.createElement(React.Fragment,null,Icon(__assign(__assign({},e.iconProps),{className:css("icon-margin",e.iconProps.className)})),o)),e.href)?React.createElement(Link,{className:css(r,n,"scroll-hidden"),href:e.href,rel:e.hrefRel,target:e.hrefTarget,excludeTabStop:!0,subtle:!0},i):React.createElement("span",{className:css(r,n,"bolt-list-cell-text")},i)};export function cellFromElement(e){for(var t,r=-1,o=-1,i=null;e;){if(-1!==(t=getAttributeAsNumber(e,"data-column-index"))&&(r=t,i=e),-1!==(t=getAttributeAsNumber(e,"data-row-index"))){o=t;break}if(e.classList.contains("bolt-list")){e=null;break}e=e.parentElement}return{cellElement:i,cellIndex:r,rowElement:e,rowIndex:o}};export function cellFromEvent(e){return cellFromElement(e.target)};
function overflowDetected(e){var t=e.style,o=t.wordBreak,r=t.whiteSpace,i=e.clientHeight;e.style.wordBreak="break-all",e.style.whiteSpace="normal";var a=i<e.clientHeight;return e.style.wordBreak=o,e.style.whiteSpace=r,a}import{__assign,__rest}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Dropdown.css";import*as React from"react";import{ExpandableTextField}from"../../ExpandableTextField";import*as Resources from"../../Resources.Dropdown";import{TextFieldFocusTreatmentBehavior}from"../../TextField";import{css}from"../../Util";export function DropdownExpandableTextField(e){var t,o,r,i=e.editable,a=e.expandableRef,l=e.items,s=e.inputClassName,n=e.renderSelectedItems,d=e.selection,p=e.showPrefix,c=void 0===p||p,m=__rest(e,["editable","expandableRef","items","inputClassName","renderSelectedItems","selection","showPrefix"]);return i||(r=e.placeholder,d.selectedCount>0&&(r=n(d,l))),c&&1===d.selectedCount&&(o=null===(t=l[d.value[0].beginIndex])||void 0===t?void 0:t.iconProps),React.createElement(ExpandableTextField,__assign({ariaHasPopup:"menu",ariaRoleDescription:i?void 0:Resources.DropdownExpandableRoleDescription,autoComplete:i,ariaAutoComplete:i?"list":void 0,focusTreatment:i?TextFieldFocusTreatmentBehavior.all:TextFieldFocusTreatmentBehavior.keyboardOnly,inputType:i?void 0:"button",editable:i,ref:a,value:r},m,{className:css(e.className,"bolt-dropdown-expandable-text-field",m.disabled&&"disabled"),inputClassName:css(s,"bolt-dropdown-expandable-textfield-input text-ellipsis"),onClick:function(e){return a.current&&a.current.expand()},prefixIconProps:e.prefixIconProps||o,tooltipProps:__assign({text:r,overflowOnly:!0,overflowDetected:overflowDetected},e.tooltipProps)}))};
import{__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Toast.css";import*as React from"react";import{makeCancelable}from"../../Core/Util/Promise";import{Button}from"../../Button";import{Callout,ContentJustification,ContentLocation}from"../../Callout";import{Measure}from"../../Measure";import{css,getSafeId,KeyCode}from"../../Util";var Toast=function(t){function e(e){var o=t.call(this,e)||this;return o.callToActionRef=React.createRef(),o.onCallToActionClick=function(t){o.props.onCallToActionClick&&o.props.onCallToActionClick(t)},o.onKeyboardShortcut=function(t){o.callToActionRef.current&&!o.state.fadingOut&&t.ctrlKey&&t.altKey&&t.which===KeyCode.t&&o.callToActionRef.current.focus()},o.onMeasureCallToAction=function(t,e){o.setState({callToActionWidth:t})},o.state={fadingOut:!1},o}return __extends(e,t),e.prototype.fadeOut=function(){var t=this;this.fadeOutPromise&&this.fadeOutPromise.cancel();var e=new Promise(function(e){t.setState({fadingOut:!0}),setTimeout(function(){e()},500)});return this.fadeOutPromise=makeCancelable(e),this.fadeOutPromise},e.prototype.render=function(){var t=this.props,e=t.message,o=t.callToAction,n=t.className,a=this.state,c=a.callToActionWidth,i=a.fadingOut,s=!o||!c||c<=120,r=s?"one-line flex-row":"multi-line flex-column",l=s?"flex-grow":void 0,m=i?"fade-out":void 0;return React.createElement(Callout,{className:css(n,"bolt-toast no-events"),contentClassName:css("bolt-toast-content",r,m),contentJustification:ContentJustification.Center,contentLocation:ContentLocation.End},React.createElement("span",{className:css("bolt-toast-message flex-shrink",l),id:getSafeId("toast-message"),role:"alert"},e),o&&React.createElement(React.Fragment,null,React.createElement("span",{className:"bolt-toast-separator flex-noshrink"}),React.createElement(Measure,{onMeasure:this.onMeasureCallToAction},React.createElement("div",{className:"bolt-toast-call-to-action-container"},React.createElement(Button,{ariaDescribedBy:"toast-message",className:"bolt-toast-call-to-action flex-noshrink",ref:this.callToActionRef,subtle:!0,onClick:this.onCallToActionClick},o)))))},e.prototype.componentDidMount=function(){document.addEventListener("keydown",this.onKeyboardShortcut)},e.prototype.componentWillUnmount=function(){this.fadeOutPromise&&this.fadeOutPromise.cancel(),document.removeEventListener("keydown",this.onKeyboardShortcut)},e}(React.Component);export{Toast};
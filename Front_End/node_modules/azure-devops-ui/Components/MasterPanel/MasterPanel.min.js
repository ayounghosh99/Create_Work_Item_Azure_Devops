import{__assign}from"tslib";import"../../CommonImports";import"../../Core/core.css";import*as React from"react";import{MasterDetailsContext}from"../../MasterDetailsContext";import{Observer}from"../../Observer";import{Surface,SurfaceBackground}from"../../Surface";import{css}from"../../Util";import{SingleLayerMasterPanel,SingleLayerMasterPanelHeader}from"../SingleLayerMasterPanel/SingleLayerMasterPanel";export var MasterPanel=function(e){var r=e.className,a=e.showOnSmallScreens,t=(React.useRef(null),React.useContext(MasterDetailsContext));return React.createElement(Surface,{background:SurfaceBackground.neutral},React.createElement(Observer,{masterDetailsLayer:t.getCurrentLayer(),hideDetailsPanel:t.hideDetailsPanel},function(e){return React.createElement(MasterPanelInternal,{className:css(r,e.hideDetailsPanel&&"full-screen"),layer:e.masterDetailsLayer,showOnSmallScreens:a||e.hideDetailsPanel})}))};var MasterPanelInternal=function(e){var r=e.className,a=e.layer,t=e.showOnSmallScreens,n=React.createRef(),l=React.useRef(!0);React.useEffect(function(){l.current?l.current=!1:n.current&&n.current.focus()},[e.layer]);var c=a.masterPanelContent,s=a.parentItem,o=a.selectedMasterItem,i=c.renderHeader?function(){return c.renderHeader(s)}:void 0,u=c.renderSearch?function(){return c.renderSearch(s)}:void 0,m=c.renderContent?function(){return c.renderContent(s,o)}:void 0;return React.createElement(React.Fragment,null,React.createElement("div",{ref:n,"aria-label":a.ariaLabel,tabIndex:-1}),React.createElement(SingleLayerMasterPanel,{className:r,key:"master-panel-"+a.key,renderContent:m,renderHeader:i,renderSearch:u,showOnSmallScreens:t}))};export var MasterPanelHeader=function(e){var r=React.useContext(MasterDetailsContext),a=r.getCurrentLayer().value.masterPanelContent;return React.createElement(SingleLayerMasterPanelHeader,__assign({},e,{onBackButtonClick:!1!==a.hideBackButton?void 0:function(){!1!==(a.onBackButtonClick&&a.onBackButtonClick())&&r.pop()}}))};
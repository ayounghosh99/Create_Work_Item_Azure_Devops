import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Checkbox.css";import*as React from"react";import{ObservableLike}from"../../Core/Observable";import{FocusGroupContext}from"../../FocusGroup";import{FocusZoneContext}from"../../FocusZone";import{Icon,IconSize}from"../../Icon";import{Observer}from"../../Observer";import{Tooltip}from"../../TooltipEx";import{css,getSafeId,KeyCode}from"../../Util";import{getTabIndex}from"../../Utilities/Focus";var checkboxId=1,TriStateCheckbox=function(e){function o(o){var t=e.call(this,o)||this;return t.checkboxElement=React.createRef(),t.animationClassName="",t.onClick=function(e){t.focus(),t.onChange(e)},t.onFocus=function(){var e=t.props.id;e&&t.context.onFocus(e)},t.onKeyDown=function(e){e.defaultPrevented||t.props.disabled||e.which===KeyCode.space&&(t.onChange(e),e.preventDefault())},t.onChange=function(e){if(t.props.onChange){var o=ObservableLike.getValue(t.props.checked);o=!1===o||!0===o&&(!!t.props.triState&&void 0),t.props.onChange(e,o)}},t.labelId="checkbox-"+checkboxId+++"-label",t}return __extends(o,e),o.prototype.render=function(){var e=this,o=this.props,t=o.disabled,r=o.label,c=o.labelId,a=o.tooltipProps;return React.createElement(FocusZoneContext.Consumer,null,function(o){return React.createElement(Observer,{checked:e.props.checked},function(n){var s=React.createElement("div",{"aria-checked":void 0===n.checked?"mixed":!0===n.checked?"true":"false","aria-describedby":getSafeId(e.props.ariaDescribedBy),"aria-disabled":e.props.disabled,"aria-label":e.props.ariaLabel,"aria-labelledby":e.props.ariaLabel?void 0:getSafeId(e.props.ariaLabelledBy),className:css(e.props.className,"bolt-checkbox cursor-pointer",!1!==n.checked&&"checked",t?"disabled":"enabled","bolt-focus-treatment",r&&"labelled"),"data-focuszone":!t&&css(e.props.focuszoneId,e.props.excludeFocusZone?void 0:o.focuszoneId),id:getSafeId(e.props.id),onClick:t?void 0:e.onClick,onFocus:e.onFocus,onKeyDown:e.onKeyDown,ref:e.checkboxElement,role:e.props.role||"checkbox",tabIndex:getTabIndex(e.props,e.context)},React.createElement("div",{className:"bolt-checkmark justify-center flex-row flex-noshrink scroll-hidden"},Icon({className:e.animationClassName,iconName:void 0===n.checked?"SkypeMinus":"CheckMark",size:IconSize.small})),r&&React.createElement("div",{className:"bolt-checkbox-label",id:getSafeId(c||e.labelId)},r),e.props.children);return a&&(s=React.createElement(Tooltip,__assign({addAriaDescribedBy:!0},a),s)),s})})},o.prototype.componentDidMount=function(){this.animationClassName="animation-ready"},o.prototype.focus=function(){this.checkboxElement.current&&this.checkboxElement.current.focus()},o.contextType=FocusGroupContext,o}(React.Component);export{TriStateCheckbox};var Checkbox=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.defaultProps={checked:!1},o}(TriStateCheckbox);export{Checkbox};
import"../../CommonImports";import"../../Core/core.css";import"./SingleLayerMasterPanel.css";import*as React from"react";import{useObservable}from"../../Core/Observable";import{TimerManagement}from"../../Core/TimerManagement";import{Header,TitleSize}from"../../Header";import{Intersection}from"../../Intersection";import{Observer}from"../../Observer";import{css}from"../../Util";export var SingleLayerMasterPanel=function(e){var t=e.className,r=e.renderContent,n=e.renderHeader,a=e.renderSearch,c=e.showOnSmallScreens,l=void 0!==c&&c,s=useObservable(!1),i=s[0],o=s[1],u=React.useRef(null),m=React.useRef(null),d=React.useRef(null),f=React.useRef(null),R=React.useRef(0),h=React.useRef(0),p=React.useRef(new TimerManagement),v=React.useRef(!1),b=React.useRef(),g=function(){if(u.current&&f.current){var e=u.current.scrollTop;i.value&&!v.current&&0===e?o(!1):i.value||R.current+f.current.clientHeight>u.current.clientHeight&&h.current+f.current.clientHeight<u.current.clientHeight||(v.current=!0,b.current&&p.current.clearTimeout(b.current),b.current=p.current.setTimeout(function(){v.current=!1,g()},100),o(!0))}},E=function(e){if(e&&(e.id="",e.hasChildNodes()))for(var t=e.children,r=0;r<t.length;r++)E(t.item(r))};return React.useEffect(function(){return m.current&&(R.current=m.current.clientHeight),d.current&&(E(d.current),h.current=d.current.clientHeight),document.addEventListener("resize",g),function(){document.removeEventListener("resize",g),p.current.dispose()}},[]),React.createElement(Intersection,null,React.createElement("div",{className:css(t,"bolt-master-panel flex-column flex-noshrink scroll-auto",l&&"show-on-small-screens"),onScroll:g,ref:u},n&&React.createElement(React.Fragment,null,React.createElement(Observer,{isScrolled:i},function(e){return React.createElement("div",{className:css("bolt-master-panel-header",a&&"has-search",e.isScrolled&&"content-scrolled"),ref:m},n())}),React.createElement("div",{"aria-hidden":"true",className:css("bolt-master-panel-header hide",a&&"has-search","content-scrolled"),ref:d},n())),React.createElement("div",{className:"bolt-master-panel-content flex-column",ref:f},a&&React.createElement("div",{className:"bolt-master-panel-search"},a()),r&&r())))};export var SingleLayerMasterPanelHeader=function(e){var t=e.title,r=e.titleAriaLevel,n=e.subTitle,a=e.onBackButtonClick;return React.createElement(Header,{backButtonProps:a?{onClick:a,subtle:!0}:void 0,className:"bolt-master-panel-standard-header",description:n,descriptionClassName:"bolt-master-panel-header-subtitle bolt-master-panel-header-secondary",title:t,titleAriaLevel:r,titleClassName:"bolt-master-panel-header-title",titleSize:TitleSize.Large})};
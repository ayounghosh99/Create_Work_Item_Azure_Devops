import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./TeachingBubble.css";import*as React from"react";import{CustomTeachingBubble}from"./CustomTeachingBubble";import{Image}from"../../Image";import{Header,TitleSize}from"../../Header";import{PanelCloseButton,PanelFooter}from"../../Panel";import{Spacing,Surface,SurfaceBackground}from"../../Surface";import{css}from"../../Util";import{FocusZone,FocusZoneDirection}from"../../FocusZone";var bubbleId=1,TeachingBubble=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customBubble=React.createRef(),t.bubbleId="bubble-"+bubbleId++,t.getContent=function(){var e=t.props,o=e.children,s=e.imageProps,r=e.primaryButtonProps,n=e.text,a=e.textOnly,i=e.title;return a?React.createElement("div",{className:"bolt-bubble-text-only body-m"},n):React.createElement(Surface,{background:SurfaceBackground.callout,spacing:Spacing.condensed},React.createElement("div",{className:"flex-row justify-center"},s&&React.createElement(Image,__assign({},s))),React.createElement(PanelCloseButton,{className:"bolt-bubble-close",onDismiss:t.dismiss}),React.createElement(Header,{className:css("bolt-bubble-text",!r&&"no-buttons"),description:n,descriptionClassName:"bolt-bubble-description",descriptionId:t.bubbleId+"-description",title:i,titleSize:TitleSize.Small,titleId:t.bubbleId+"-title"}),o,r&&React.createElement(FocusZone,{direction:FocusZoneDirection.Horizontal},React.createElement("div",{className:"bolt-bubble-buttons"},React.createElement(PanelFooter,{buttonProps:t.getButtons()}))))},t.getButtons=function(){var e=t.props,o=e.primaryButtonProps,s=e.secondaryButtonProps,r=[__assign(__assign({},o),{className:css("bolt-bubble-primary-button",o.className)})];return s&&r.push(s),r},t.setFocus=function(){var e=t.props,o=e.onLocationChange,s=e.primaryButtonProps,r=e.secondaryButtonProps;if(s&&!r){var n=document.getElementsByClassName("bolt-bubble-primary-button")[0];n&&n.focus()}else if(!s){var a=document.getElementsByClassName("bolt-bubble-close")[0];a&&a.focus()}o&&o()},t.dismiss=function(){t.customBubble.current&&t.customBubble.current.dismiss()},t}return __extends(t,e),t.prototype.render=function(){var e=this.props.defaultActiveElement;return e||this.props.textOnly||(e=this.props.primaryButtonProps?".bolt-bubble-primary-button":".bolt-bubble-close"),React.createElement(CustomTeachingBubble,__assign({},this.props,{ariaDescribedBy:this.props.ariaDescribedBy||this.bubbleId+"-description",ariaLabeledBy:this.props.ariaLabeledBy||this.bubbleId+"-title",defaultActiveElement:e,onLocationChange:this.setFocus,ref:this.customBubble}),this.getContent())},t}(React.Component);export{TeachingBubble};
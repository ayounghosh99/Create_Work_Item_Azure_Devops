import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Panel.css";import*as React from"react";import{ScreenContext,ScreenSize}from"../../Core/Util/Screen";import{Callout,ContentJustification,ContentLocation,ContentOrientation,ContentSize}from"../../Callout";import{FocusZoneKeyStroke}from"../../FocusZone";import{Observer}from"../../Observer";import{Spacing,Surface,SurfaceContext}from"../../Surface";import{css,KeyCode}from"../../Util";var CustomPanel=function(e){function t(t){var n=e.call(this,t)||this;return n.calloutContentRef=React.createRef(),n.defaultActiveElement=function(){var e=n.props.defaultActiveElement,t="function"==typeof e?e():e;if(t&&n.calloutContentRef.current){var o=n.calloutContentRef.current.querySelectorAll(t);if(o&&o.length)return t}return".bolt-panel-focus-element"},n.state={isDisplayed:!0},n}return __extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.ariaLabel,o=t.ariaLabelledBy,a=t.blurDismiss,s=t.calloutClassName,r=t.children,i=t.className,l=t.contentClassName,c=t.escDismiss,u=t.id,m=t.lightDismiss,f=t.modal,p=t.onDismiss,C=t.portalProps,d=t.size,S=void 0===d?ContentSize.Medium:d,v=this.state.isDisplayed;return React.createElement(Observer,{size:this.context.size},function(t){var d=t.size===ScreenSize.xsmall;return React.createElement(Callout,{ariaLabel:n,ariaLabelledBy:o,blurDismiss:a,className:css("bolt-panel",s,!1===v&&"no-events"),contentClassName:css(l,"bolt-panel-callout-content scroll-auto",v?"in":"out",d?"bolt-panel-fullscreen absolute-fill":"relative"),contentJustification:ContentJustification.Stretch,contentLocation:ContentLocation.End,contentOrientation:ContentOrientation.Column,contentRef:e.calloutContentRef,contentShadow:!0,contentSize:d?void 0:S,escDismiss:c,id:u,focuszoneProps:{circularNavigation:!0,defaultActiveElement:e.defaultActiveElement,focusOnMount:!0,handleTabKey:!0,includeDefaults:!0,postprocessKeyStroke:function(e){return e.which===KeyCode.tab&&e.preventDefault(),FocusZoneKeyStroke.IgnoreParents}},lightDismiss:m&&!1!==v,modal:f&&!1!==v,onDismiss:p,portalProps:C},React.createElement(SurfaceContext.Consumer,null,function(e){return React.createElement(Surface,__assign({},e,{spacing:Spacing.default}),React.createElement("div",{className:css(i,"bolt-panel-root flex-column flex-grow scroll-auto")},React.createElement("div",{className:"bolt-panel-focus-element no-outline",tabIndex:-1}),r))}))})},t.prototype.animateOut=function(){return Promise.resolve()},t.defaultProps={escDismiss:!0,lightDismiss:!0,modal:!0},t.contextType=ScreenContext,t}(React.Component);export{CustomPanel};
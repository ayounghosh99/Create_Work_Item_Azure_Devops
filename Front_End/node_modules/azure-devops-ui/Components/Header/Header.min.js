import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Header.css";import*as React from"react";import{CustomHeader}from"./CustomHeader";import{HeaderBackButton}from"./HeaderBackButton";import{HeaderDescription}from"./HeaderDescription";import{HeaderIcon}from"./HeaderIcon";import{HeaderTitle}from"./HeaderTitle";import{HeaderTitleArea}from"./HeaderTitleArea";import{HeaderTitleRow}from"./HeaderTitleRow";import{ObservableValue}from"../../Core/Observable";import{Breakpoint}from"../../Breakpoint";import{HeaderCommandBar}from"../../HeaderCommandBar";import{Observer}from"../../Observer";import{TabProviderContext}from"../../Tabs";import{css}from"../../Util";var Header=function(e){function t(t){var r=e.call(this,t)||this;return r.breakpointIndex=0,r.headerCommandBarRef=React.createRef(),r.onBreakPoint=function(e,t){r.breakpointIndex=e,r.commandBarClassName.value=css(r.props.commandBarClassName,"flex-self-start")},r.commandBarClassName=new ObservableValue(css(t.commandBarClassName,"flex-self-start",!!t.headerBreakpoints&&"invisible")),r}return __extends(t,e),t.prototype.render=function(){var e=this;return React.createElement(TabProviderContext.Consumer,null,function(t){var r=e.props,a=r.backButtonProps,o=r.buttonCount,n=r.className,m=r.contentClassName,s=r.commandBarMoreButtonId,i=r.description,c=r.descriptionClassName,l=r.descriptionId,d=r.headerBreakpoints,p=r.title,u=r.titleAriaLevel,f=r.titleClassName,B=r.titleIconProps,b=r.titleId,C=r.titleSize,h=e.props.commandBarItems||t.commandBarItems,H=void 0;return h&&(H=React.createElement(Observer,{items:h,className:e.commandBarClassName},function(t){return React.createElement(HeaderCommandBar,{buttonCount:o,className:t.className,items:e.getUpdatedCommandBarItems(t.items),moreButtonId:s,ref:e.headerCommandBarRef})})),React.createElement(React.Fragment,null,d&&React.createElement(Breakpoint,{breakpoints:d.map(function(e){return e.breakpoint}),onBreakpoint:e.onBreakPoint}),React.createElement(CustomHeader,{className:css(n,h&&h.length>0&&"bolt-header-with-commandbar",a&&"bolt-header-with-back-button"),separator:e.props.separator},a&&React.createElement(HeaderBackButton,{buttonProps:a}),React.createElement("div",{className:css(m,"bolt-header-content-area flex-row flex-grow flex-self-stretch")},B&&React.createElement(HeaderIcon,{iconProps:B,titleSize:C}),React.createElement(HeaderTitleArea,null,React.createElement(HeaderTitleRow,null,p&&React.createElement(HeaderTitle,{ariaLevel:u,className:f,id:b,titleSize:C},p)),i&&React.createElement(HeaderDescription,{className:c,id:l},i),e.props.children),H)))})},t.prototype.focus=function(e){this.headerCommandBarRef.current&&this.headerCommandBarRef.current.focus(e)},t.prototype.getUpdatedCommandBarItems=function(e){var t=this.props.headerBreakpoints,r=t?t[Math.max(0,this.breakpointIndex)]:null;if(r){var a=r.commandBarItems,o=void 0===a?[]:a;if(o.length>0){var n={};o.forEach(function(e){return n[e.id]=e});for(var m=[],s=0,i=e;s<i.length;s++){var c=i[s],l=n[c.id];l?m.push(__assign(__assign({},c),l)):m.push(__assign({},c))}return m}}return e},t}(React.Component);export{Header};
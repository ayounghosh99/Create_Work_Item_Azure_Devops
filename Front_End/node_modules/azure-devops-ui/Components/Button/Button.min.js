import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Button.css";import"./ExpandableButton.css";import*as React from"react";import{FocusGroupContext}from"../../FocusGroup";import{FocusZoneContext}from"../../FocusZone";import{Icon,IconSize}from"../../Icon";import{Tooltip}from"../../TooltipEx";import{childCount,css,getSafeId,KeyCode}from"../../Util";import{getTabIndex}from"../../Utilities/Focus";var Button=function(o){function e(){var e=null!==o&&o.apply(this,arguments)||this;return e.buttonElement=React.createRef(),e.onClick=function(o){if(e.props.disabled)o.preventDefault();else{var r=e.props.onClick;e.focus(),r&&r(o)}},e.onFocus=function(o){e.props.onFocus&&e.props.onFocus(o),e.props.id&&e.context.onFocus&&e.context.onFocus(e.props.id)},e.onKeyDown=function(o){o.defaultPrevented||e.props.disabled||(o.which===KeyCode.enter||o.which===KeyCode.space?(e.props.onClick&&e.props.onClick(o),e.props.href||o.preventDefault()):e.props.onKeyDown&&e.props.onKeyDown(o))},e.onMouseDown=function(o){o.defaultPrevented||e.props.disabled&&o.preventDefault();var r=e.props.onMouseDown;r&&r(o)},e.onMouseLeave=function(o){if(!e.props.disabled){var r=e.props.onMouseLeave;r&&r(o)}},e.onMouseOver=function(o){if(!e.props.disabled){var r=e.props.onMouseOver;r&&r(o)}},e}return __extends(e,o),e.prototype.render=function(){var o=this,e=this.props.iconProps&&!this.props.text&&0===childCount(this.props.children),r=void 0!==this.props.tooltipProps?this.props.tooltipProps:e&&this.props.ariaLabel?{text:this.props.ariaLabel}:void 0;return React.createElement(FocusZoneContext.Consumer,null,function(s){var p=o.props.href?"a":"button",t=o.props.role||(o.props.href?"link":"button"),n=React.createElement(p,{autoFocus:o.props.href?void 0:o.props.autoFocus,"aria-controls":getSafeId(o.props.ariaControls),"aria-describedby":getSafeId(o.props.ariaDescribedBy),"aria-disabled":o.props.disabled,"aria-expanded":o.props.ariaExpanded,"aria-haspopup":o.props.ariaHasPopup,"aria-label":o.props.ariaLabel,"aria-setsize":o.props.ariaSetSize,"aria-posinset":o.props.ariaPosInSet,"aria-selected":o.props.ariaSelected,"aria-checked":o.props.ariaChecked,"aria-pressed":o.props.ariaPressed,"aria-roledescription":o.props.ariaRoleDescription,className:css(o.props.className,"bolt-button",o.props.href&&"bolt-link-button",o.props.iconProps&&"bolt-icon-button",o.props.danger&&"danger",o.props.disabled?"disabled":"enabled",o.props.primary&&"primary",o.props.subtle&&"subtle",e&&"icon-only","bolt-focus-treatment"),"data-focuszone":o.props.disabled||o.props.excludeFocusZone?void 0:css(o.props.focusZoneId,s.focuszoneId),"data-index":o.props.dataIndex,"data-is-focusable":!o.props.excludeFocusZone,href:o.props.disabled?void 0:o.props.href,id:getSafeId(o.props.id),onBlur:o.props.onBlur,onClick:o.onClick,onMouseLeave:o.onMouseLeave,onMouseOver:o.onMouseOver,onKeyDown:o.onKeyDown,onMouseDown:o.onMouseDown,onFocus:o.onFocus,rel:o.props.rel,role:t,style:o.props.style,tabIndex:getTabIndex(o.props,o.context),target:o.props.target,type:o.props.type?o.props.type:o.props.href?void 0:"button",ref:o.buttonElement},o.props.iconProps&&Icon(__assign(__assign({size:IconSize.medium},o.props.iconProps),{className:css(o.props.iconProps.className,"left-icon")})),o.props.text&&React.createElement("span",{className:"bolt-button-text body-m"},o.props.text),o.props.children);return r&&(n=React.createElement(Tooltip,__assign({addAriaDescribedBy:!0},r),n)),n})},e.prototype.focus=function(){this.buttonElement.current&&this.buttonElement.current.focus()},e.contextType=FocusGroupContext,e}(React.Component);export{Button};
import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Button.css";import"./ExpandableButton.css";import*as React from"react";import{Expandable}from"../../Expandable";import{Icon,IconSize}from"../../Icon";import{css,KeyCode}from"../../Util";import{Location}from"../../Utilities/Position";import{Button}from"./Button";var buttonId=1,ExpandableButton=function(o){function e(e){var n=o.call(this,e)||this;return n.buttonElement=React.createRef(),n.expandable=React.createRef(),n.collapse=function(){n.expandable.current&&n.expandable.current.collapse()},n.expand=function(){n.expandable.current&&n.expandable.current.expand()},n.renderCallout=function(){return n.props.renderCallout(n,n.dropdownId,n.props.anchorElement?n.props.anchorElement:n.props.anchorPoint?void 0:n.containerElement.current?n.containerElement.current:void 0,n.props.anchorOffset||{horizontal:0,vertical:0},n.props.anchorOrigin||{horizontal:Location.end,vertical:Location.end},n.props.anchorPoint,n.props.dropdownOrigin||{horizontal:Location.end,vertical:Location.start})},n.dropdownId=e.dropdownId||"dropdown-"+buttonId++,n.containerElement=e.containerRef||React.createRef(),n}return __extends(e,o),e.prototype.render=function(){var o=this;return React.createElement(Expandable,{disabled:this.props.disabled,expandKey:this.props.expandKey,onCollapse:this.props.onCollapse,onExpand:this.props.onExpand,renderCallout:this.renderCallout,ref:this.expandable},function(e){var n;return React.createElement("div",{className:css(o.props.className,"bolt-expandable-button inline-flex-row"),onMouseDown:e.onMouseDown,onKeyDown:e.onKeyDown,ref:o.containerElement},React.createElement(Button,__assign({},o.props,{ariaControls:e.expanded?o.dropdownId:void 0,ariaExpanded:e.expanded,ariaHasPopup:!0,ariaLabel:o.props.ariaLabel||o.props.tooltipProps&&o.props.tooltipProps.text?null===(n=o.props.tooltipProps)||void 0===n?void 0:n.text:"",className:css(!o.props.text&&!o.props.children&&o.props.iconProps&&"icon-only",e.expanded&&"active"),onClick:function(n){e.onClick(n),o.props.onClick&&o.props.onClick(n),n.preventDefault()},ref:o.buttonElement,tooltipProps:o.props.tooltipProps?__assign(__assign({},o.props.tooltipProps),{disabled:e.expanded}):void 0}),o.props.children,o.props.hideDropdownIcon?void 0:Icon({key:"dropdown-icon",className:"icon-right font-weight-normal",iconName:"ChevronDownMed",size:IconSize.small})))})},e.prototype.focus=function(){this.buttonElement.current&&this.buttonElement.current.focus()},e.defaultProps={expandKey:[KeyCode.downArrow,KeyCode.enter]},e}(React.Component);export{ExpandableButton};
function pointFromOrigin(t,o){var a,i;switch(t.horizontal){case Location.start:a=o.left;break;case Location.end:a=o.right;break;default:a=o.left+o.width/2}switch(t.vertical){case Location.start:i=o.top;break;case Location.end:i=o.bottom;break;default:i=o.top+o.height/2}return{x:a,y:i}}var LAYOUT_CALCULATION_MAX_TIMES=5;export var Location;!function(t){t.start="start",t.center="center",t.end="end"}(Location||(Location={}));export function distance(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))};export function position(t,o,a,i,n,e,r){if(void 0===r&&(r=5e3),!e){if(!i||!n)return;e=pointFromOrigin(n,i.getBoundingClientRect())}var c=e.x,l=e.y,h=0,L=0;if(a&&(c+=a.horizontal,l+=a.vertical),o.horizontal!==Location.start||o.vertical!==Location.start){var s=document.documentElement.clientHeight,d=document.documentElement.clientWidth;switch(o.horizontal){case Location.end:c=d-c;break;case Location.center:h=-50}switch(o.vertical){case Location.end:l=s-l;break;case Location.center:L=-50}}o.horizontal!==Location.end?(t.style.left=c+r+"px",t.style.right=""):(t.style.left="",t.style.right=c+r+"px"),o.vertical!==Location.end?(t.style.top=l+r+"px",t.style.bottom=""):(t.style.top="",t.style.bottom=l+r+"px"),t.style.transform=0!==h||0!==L?"translate("+h+"%, "+L+"%)":""};export function updateLayout(t,o,a,i,n,e,r,c){void 0===r&&(r=0),void 0===c&&(c=5e3);var l=document.documentElement.clientHeight,h=document.documentElement.clientWidth,L=t.getBoundingClientRect(),s=Math.floor(L.bottom)>l,d=Math.floor(L.right)>h,v=Math.floor(L.left)<0,f=Math.floor(L.top)<0;if((s||d||v||f)&&(e?(f!==s&&(f?L.bottom<l/2-10&&o.vertical===Location.end&&(o.vertical=Location.start):L.top>l/2+10&&o.vertical===Location.start&&(o.vertical=Location.end),a&&(a.vertical=-a.vertical)),v!==d&&(v?L.right<h/2-10&&o.horizontal===Location.end&&(o.horizontal=Location.start):L.left>h/2+10&&o.horizontal===Location.start&&(o.horizontal=Location.end),a&&(a.horizontal=-a.horizontal))):n&&i&&(f!==s&&(f?L.bottom<l/2-10&&(o.vertical===Location.end&&n.vertical===Location.start?(o.vertical=Location.start,n.vertical=Location.end):(o.vertical===Location.center||o.vertical===Location.end&&n.vertical===Location.end)&&(o.vertical=Location.start,n.vertical=Location.start)):L.top>l/2+10&&(o.vertical===Location.start&&n.vertical===Location.end?(o.vertical=Location.end,n.vertical=Location.start):(o.vertical===Location.center||o.vertical===Location.start&&n.vertical===Location.start)&&(o.vertical=Location.end,n.vertical=Location.end)),a&&(a.vertical=-a.vertical)),v!==d&&(v?L.right<h/2-10&&(o.horizontal===Location.end&&n.horizontal===Location.start?(o.horizontal=Location.start,n.horizontal=Location.end):(o.horizontal===Location.center||o.horizontal===Location.end&&n.horizontal===Location.end)&&(o.horizontal=Location.start,n.horizontal=Location.start)):L.left>h/2+10&&(o.horizontal===Location.start&&n.horizontal===Location.end?(o.horizontal=Location.end,n.horizontal=Location.start):(o.horizontal===Location.center||o.horizontal===Location.start&&n.horizontal===Location.start)&&(o.horizontal=Location.end,n.horizontal=Location.end)),a&&(a.horizontal=-a.horizontal))),position(t,o,a,i,n,e,c),L=t.getBoundingClientRect(),s=Math.floor(L.bottom)>l,d=Math.floor(L.right)>h,v=Math.floor(L.left)<0,(f=Math.floor(L.top)<0)||s||v||d)){if(f||s){var z=L.height-(f?-L.top:0)-(s?L.bottom-l:0)-5;t.style.maxHeight=z+"px"}if(v||d){var p=L.width-(v?-L.left:0)-(d?L.right-h:0)-5;t.style.maxWidth=p+"px"}t.classList.add("overflow"),position(t,o,a,i,n,e,c),r<LAYOUT_CALCULATION_MAX_TIMES&&(L=t.getBoundingClientRect(),s=Math.floor(L.bottom)>l,d=Math.floor(L.right)>h,v=Math.floor(L.left)<0,f=Math.floor(L.top)<0,(s||d||v||f)&&updateLayout(t,o,a,i,n,e,++r))}};